import{r as u,j as e,y as N}from"./app-CYYuMXkt.js";import{A as w,I as h,B as F,J as v}from"./AuthenticatedLayout--lglzmnZ.js";import{C as S,a as E,b as k,e as A,c as I}from"./card-BL1aZsCC.js";import{u as L,t as P,F as R,a as n,b as o,c as l,d,e as i,f as T,C as U}from"./zod-C2kfiY4h.js";import{o as D,s as m,a as J}from"./index-wisH2Gyr.js";import"./index-BBB_JS8g.js";import"./label-t_80emjS.js";const B=D({name:m().min(2,{message:"Name must be at least 2 characters."}),email:m().email({message:"Invalid email address."}),phone:m().min(10,{message:"Phone number must be at least 10 digits."}),password:m(),roles:J(m()).min(1,{message:"Please select at least one role."})});function Q({roles:g,user:t}){const[H,f]=u.useState([]),[j,x]=u.useState(!1),a=L({resolver:P(B),defaultValues:{name:t.name,email:t.email,phone:t.phone,password:"",roles:[...t.roles.map(s=>s.name)]}});function b(s){console.log(s),x(!0),N.put(route("users.update",t.id),s,{onSuccess:()=>{v.info("Updated"),x(!1)},onError:r=>{Object.keys(r).forEach(c=>{console.log(r.phone),a.setError(c,{message:r[c]})}),x(!1)}}),f([])}return e.jsx(w,{children:e.jsx("div",{className:"container mx-auto",children:e.jsxs(S,{className:"",children:[e.jsxs(E,{children:[e.jsx(k,{children:"Add New User"}),e.jsx(A,{children:"Enter the details of the new user below."})]}),e.jsx(I,{children:e.jsx(R,{...a,children:e.jsxs("form",{onSubmit:a.handleSubmit(b),className:"gap-4 grid grid-cols-1",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(n,{control:a.control,name:"name",render:({field:s})=>e.jsxs(o,{children:[e.jsx(l,{children:"Name"}),e.jsx(d,{children:e.jsx(h,{placeholder:"John Doe",...s})}),e.jsx(i,{})]})}),e.jsx(n,{control:a.control,name:"email",render:({field:s})=>e.jsxs(o,{children:[e.jsx(l,{children:"Email"}),e.jsx(d,{children:e.jsx(h,{type:"email",placeholder:"john@example.com",...s})}),e.jsx(i,{})]})}),e.jsx(n,{control:a.control,name:"phone",render:({field:s})=>e.jsxs(o,{children:[e.jsx(l,{children:"Phone"}),e.jsx(d,{children:e.jsx(h,{type:"tel",placeholder:"123-456-7890",...s})}),e.jsx(i,{})]})}),e.jsx(n,{control:a.control,name:"password",render:({field:s})=>e.jsxs(o,{children:[e.jsx(l,{children:"Password"}),e.jsx(d,{children:e.jsx(h,{type:"password",placeholder:"********",...s})}),e.jsx("small",{className:"text-gray-500",children:"Leave blank if you are not changing the password"}),e.jsx(i,{})]})})]}),e.jsx(n,{control:a.control,name:"roles",render:()=>e.jsxs(o,{children:[e.jsx(l,{children:"Roles"}),e.jsx(T,{children:"Select the roles for this user."}),e.jsx("div",{className:"grid grid-cols-2 gap-2 mt-2",children:g.map(s=>e.jsx(n,{control:a.control,name:"roles",render:({field:r})=>{var c;return e.jsxs(o,{className:"flex flex-row items-start space-x-3 space-y-0",children:[e.jsx(d,{children:e.jsx(U,{checked:(c=r.value)==null?void 0:c.includes(s.name),onCheckedChange:y=>{var p;return y?r.onChange([...r.value,s.name]):r.onChange((p=r.value)==null?void 0:p.filter(C=>C!==s.name))}})}),e.jsx(l,{className:"font-normal",children:s.name})]},s.name)}},s.name))}),e.jsx(i,{})]})}),e.jsx("div",{children:e.jsx(F,{isLoading:j,disabled:j,type:"submit",className:"mt-6",children:"Update"})})]})})})]})})})}export{Q as default};
