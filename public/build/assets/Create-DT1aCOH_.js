import{r as p,j as e,y}from"./app-D6fkvZbA.js";import{A as N,I as m,B as w,J as F}from"./AuthenticatedLayout-CcBeljlA.js";import{C as S,a as v,b as E,e as A,c as P}from"./card-8DjiWBJf.js";import{u as I,F as R,a as n,b as o,c as t,d as c,e as d,f as T,C as U,t as k}from"./zod-B8UTJ9Zw.js";import{o as D,s as i,a as J}from"./index-wisH2Gyr.js";import"./index-CP3OEn7_.js";import"./label-DRukCHiJ.js";const L=D({name:i().min(2,{message:"Name must be at least 2 characters."}),email:i().email({message:"Invalid email address."}),phone:i().min(10,{message:"Phone number must be at least 10 digits."}),password:i().min(8,{message:"Password must be at least 8 characters."}),roles:J(i()).min(1,{message:"Please select at least one role."})});function K({roles:u}){const[B,g]=p.useState([]),[x,h]=p.useState(!1),r=I({resolver:k(L),defaultValues:{name:"",email:"",phone:"",password:"",roles:[]}});function f(s){console.log(s),h(!0),y.post(route("users.store"),s,{onSuccess:()=>{h(!1),F.success("User Created"),r.reset()},onError:a=>{Object.keys(a).forEach(l=>{console.log(a.phone),r.setError(l,{message:a[l]})}),h(!1)}}),g([])}return e.jsx(N,{children:e.jsx("div",{className:"container mx-auto",children:e.jsxs(S,{className:"",children:[e.jsxs(v,{children:[e.jsx(E,{children:"Add New User"}),e.jsx(A,{children:"Enter the details of the new user below."})]}),e.jsx(P,{children:e.jsx(R,{...r,children:e.jsxs("form",{onSubmit:r.handleSubmit(f),className:"gap-4 grid grid-cols-1",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(n,{control:r.control,name:"name",render:({field:s})=>e.jsxs(o,{children:[e.jsx(t,{children:"Name"}),e.jsx(c,{children:e.jsx(m,{placeholder:"John Doe",...s})}),e.jsx(d,{})]})}),e.jsx(n,{control:r.control,name:"email",render:({field:s})=>e.jsxs(o,{children:[e.jsx(t,{children:"Email"}),e.jsx(c,{children:e.jsx(m,{type:"email",placeholder:"john@example.com",...s})}),e.jsx(d,{})]})}),e.jsx(n,{control:r.control,name:"phone",render:({field:s})=>e.jsxs(o,{children:[e.jsx(t,{children:"Phone"}),e.jsx(c,{children:e.jsx(m,{type:"tel",placeholder:"123-456-7890",...s})}),e.jsx(d,{})]})}),e.jsx(n,{control:r.control,name:"password",render:({field:s})=>e.jsxs(o,{children:[e.jsx(t,{children:"Password"}),e.jsx(c,{children:e.jsx(m,{type:"password",placeholder:"********",...s})}),e.jsx(d,{})]})})]}),e.jsx(n,{control:r.control,name:"roles",render:()=>e.jsxs(o,{children:[e.jsx(t,{children:"Roles"}),e.jsx(T,{children:"Select the roles for this user."}),e.jsx("div",{className:"grid grid-cols-2 gap-2 mt-2",children:u.map(s=>e.jsx(n,{control:r.control,name:"roles",render:({field:a})=>{var l;return e.jsxs(o,{className:"flex flex-row items-start space-x-3 space-y-0",children:[e.jsx(c,{children:e.jsx(U,{checked:(l=a.value)==null?void 0:l.includes(s.name),onCheckedChange:b=>{var j;return b?a.onChange([...a.value,s.name]):a.onChange((j=a.value)==null?void 0:j.filter(C=>C!==s.name))}})}),e.jsx(t,{className:"font-normal",children:s.name})]},s.name)}},s.name))}),e.jsx(d,{})]})}),e.jsx("div",{children:e.jsx(w,{type:"submit",disabled:x,isLoading:x,className:"mt-6",children:"Add User"})})]})})})]})})})}export{K as default};
